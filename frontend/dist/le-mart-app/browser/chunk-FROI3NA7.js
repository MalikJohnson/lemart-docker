import{h as le}from"./chunk-PMZGBCKH.js";import{i as Y,o as re}from"./chunk-CMEXFVJG.js";import{A as $,D as J,E as X,F as Q,G as ee,H as te,K as ie,M as ne,k as U,l as k,m as K,q as W,v as Z,w as m,x as B,y as H}from"./chunk-66TIHPRD.js";import{Db as x,Eb as R,Mb as r,Nb as G,Ob as j,Ra as l,Wb as g,Xa as N,ab as V,c as O,gb as u,nb as o,sb as n,tb as i,ub as p}from"./chunk-J2LCUAOM.js";var c=t=>({"is-invalid":t});function ae(t,a){if(t&1&&(n(0,"div",38),r(1),i()),t&2){let s=R();l(),j(" ",s.errorMessage," ")}}function se(t,a){t&1&&(n(0,"div",39),r(1," Username is required "),i())}function me(t,a){t&1&&(n(0,"div",39),r(1," Username must be at least 3 characters "),i())}function ue(t,a){t&1&&(n(0,"div",39),r(1," Email is required "),i())}function de(t,a){t&1&&(n(0,"div",39),r(1," Please enter a valid email address "),i())}function pe(t,a){t&1&&(n(0,"div",39),r(1," Password is required "),i())}function ge(t,a){t&1&&(n(0,"div",39),r(1," Password must be at least 6 characters "),i())}function ce(t,a){t&1&&(n(0,"div",39),r(1," Please confirm your password "),i())}function fe(t,a){t&1&&(n(0,"div",39),r(1," Passwords do not match "),i())}function ve(t,a){t&1&&(n(0,"div",39),r(1," Street address is required "),i())}function _e(t,a){t&1&&(n(0,"div",39),r(1," City is required "),i())}function Se(t,a){if(t&1&&(n(0,"option",40),r(1),i()),t&2){let s=a.$implicit;o("value",s),l(),G(s)}}function Ce(t,a){t&1&&(n(0,"div",39),r(1," State is required "),i())}function he(t,a){t&1&&(n(0,"div",39),r(1," Zip code is required "),i())}function Fe(t,a){t&1&&(n(0,"div",39),r(1," Please enter a valid zip code (e.g., 12345 or 12345-6789) "),i())}function ye(t,a){t&1&&p(0,"span",41)}var oe=class t{constructor(a,s,e,d){this.fb=a;this.authService=s;this.router=e;this.toastr=d;this.signupForm=this.fb.group({username:["",[m.required,m.minLength(3)]],email:["",[m.required,m.email]],password:["",[m.required,m.minLength(6)]],confirmPassword:["",[m.required]],streetAddress:["",[m.required]],city:["",[m.required]],state:["",[m.required]],zipCode:["",[m.required,m.pattern(/^\d{5}(-\d{4})?$/)]]},{validators:this.passwordMatchValidator})}signupForm;errorMessage="";isLoading=!1;states=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"];passwordMatchValidator(a){let s=a.get("password")?.value,e=a.get("confirmPassword")?.value;return s===e?null:{passwordMismatch:!0}}onSubmit(){if(this.signupForm.invalid){this.signupForm.markAllAsTouched();return}this.isLoading=!0,this.errorMessage="";let e=this.signupForm.value,{confirmPassword:a}=e,s=O(e,["confirmPassword"]);this.authService.signup(s).subscribe({next:d=>{this.isLoading=!1,this.toastr.success(d.message),this.router.navigate(["/"])},error:d=>{this.isLoading=!1,this.errorMessage=d.error?.error||d.error?.message||"Registration failed. Please try again."}})}static \u0275fac=function(s){return new(s||t)(N(ie),N(re),N(Y),N(le))};static \u0275cmp=V({type:t,selectors:[["app-signup"]],decls:72,vars:42,consts:[[1,"container","mt-5","mb-5"],[1,"row","justify-content-center"],[1,"col-md-8"],[1,"card","shadow"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"card-body"],[3,"ngSubmit","formGroup"],["class","alert alert-danger",4,"ngIf"],[1,"row"],[1,"col-md-6","mb-3"],["for","username",1,"form-label"],["type","text","id","username","formControlName","username","placeholder","Choose a username",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Your email address",1,"form-control",3,"ngClass"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password","placeholder","Create a password",1,"form-control",3,"ngClass"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password",1,"form-control",3,"ngClass"],[1,"mt-4","mb-3"],[1,"mb-3"],["for","streetAddress",1,"form-label"],["type","text","id","streetAddress","formControlName","streetAddress","placeholder","Enter your street address",1,"form-control",3,"ngClass"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city","placeholder","Enter your city",1,"form-control",3,"ngClass"],[1,"col-md-3","mb-3"],["for","state",1,"form-label"],["id","state","formControlName","state",1,"form-select",3,"ngClass"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","zipCode",1,"form-label"],["type","text","id","zipCode","formControlName","zipCode","placeholder","Zip code",1,"form-control",3,"ngClass"],[1,"d-grid","gap-2","mt-4"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/login"],[1,"alert","alert-danger"],[1,"invalid-feedback"],[3,"value"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(s,e){if(s&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),r(6,"Create an Account"),i()(),n(7,"div",6)(8,"form",7),x("ngSubmit",function(){return e.onSubmit()}),u(9,ae,2,1,"div",8),n(10,"div",9)(11,"div",10)(12,"label",11),r(13,"Username"),i(),p(14,"input",12),u(15,se,2,0,"div",13)(16,me,2,0,"div",13),i(),n(17,"div",10)(18,"label",14),r(19,"Email"),i(),p(20,"input",15),u(21,ue,2,0,"div",13)(22,de,2,0,"div",13),i()(),n(23,"div",9)(24,"div",10)(25,"label",16),r(26,"Password"),i(),p(27,"input",17),u(28,pe,2,0,"div",13)(29,ge,2,0,"div",13),i(),n(30,"div",10)(31,"label",18),r(32,"Confirm Password"),i(),p(33,"input",19),u(34,ce,2,0,"div",13)(35,fe,2,0,"div",13),i()(),n(36,"h5",20),r(37,"Shipping Address"),i(),n(38,"div",21)(39,"label",22),r(40,"Street Address"),i(),p(41,"input",23),u(42,ve,2,0,"div",13),i(),n(43,"div",9)(44,"div",10)(45,"label",24),r(46,"City"),i(),p(47,"input",25),u(48,_e,2,0,"div",13),i(),n(49,"div",26)(50,"label",27),r(51,"State"),i(),n(52,"select",28)(53,"option",29),r(54,"Select State"),i(),u(55,Se,2,2,"option",30),i(),u(56,Ce,2,0,"div",13),i(),n(57,"div",26)(58,"label",31),r(59,"Zip Code"),i(),p(60,"input",32),u(61,he,2,0,"div",13)(62,Fe,2,0,"div",13),i()(),n(63,"div",33)(64,"button",34),u(65,ye,1,0,"span",35),r(66," Sign Up "),i()(),n(67,"div",36)(68,"p"),r(69,"Already have an account? "),n(70,"a",37),r(71,"Log in"),i()()()()()()()()()),s&2){let d,f,v,A,_,S,T,C,h,M,F,D,q,y,P,b,L,E,z,w,I;l(8),o("formGroup",e.signupForm),l(),o("ngIf",e.errorMessage),l(5),o("ngClass",g(26,c,((d=e.signupForm.get("username"))==null?null:d.invalid)&&((d=e.signupForm.get("username"))==null?null:d.touched))),l(),o("ngIf",((f=e.signupForm.get("username"))==null||f.errors==null?null:f.errors.required)&&((f=e.signupForm.get("username"))==null?null:f.touched)),l(),o("ngIf",((v=e.signupForm.get("username"))==null||v.errors==null?null:v.errors.minlength)&&((v=e.signupForm.get("username"))==null?null:v.touched)),l(4),o("ngClass",g(28,c,((A=e.signupForm.get("email"))==null?null:A.invalid)&&((A=e.signupForm.get("email"))==null?null:A.touched))),l(),o("ngIf",((_=e.signupForm.get("email"))==null||_.errors==null?null:_.errors.required)&&((_=e.signupForm.get("email"))==null?null:_.touched)),l(),o("ngIf",((S=e.signupForm.get("email"))==null||S.errors==null?null:S.errors.email)&&((S=e.signupForm.get("email"))==null?null:S.touched)),l(5),o("ngClass",g(30,c,((T=e.signupForm.get("password"))==null?null:T.invalid)&&((T=e.signupForm.get("password"))==null?null:T.touched))),l(),o("ngIf",((C=e.signupForm.get("password"))==null||C.errors==null?null:C.errors.required)&&((C=e.signupForm.get("password"))==null?null:C.touched)),l(),o("ngIf",((h=e.signupForm.get("password"))==null||h.errors==null?null:h.errors.minlength)&&((h=e.signupForm.get("password"))==null?null:h.touched)),l(4),o("ngClass",g(32,c,(((M=e.signupForm.get("confirmPassword"))==null?null:M.invalid)||e.signupForm.hasError("passwordMismatch"))&&((M=e.signupForm.get("confirmPassword"))==null?null:M.touched))),l(),o("ngIf",((F=e.signupForm.get("confirmPassword"))==null||F.errors==null?null:F.errors.required)&&((F=e.signupForm.get("confirmPassword"))==null?null:F.touched)),l(),o("ngIf",e.signupForm.hasError("passwordMismatch")&&((D=e.signupForm.get("confirmPassword"))==null?null:D.touched)),l(6),o("ngClass",g(34,c,((q=e.signupForm.get("streetAddress"))==null?null:q.invalid)&&((q=e.signupForm.get("streetAddress"))==null?null:q.touched))),l(),o("ngIf",((y=e.signupForm.get("streetAddress"))==null||y.errors==null?null:y.errors.required)&&((y=e.signupForm.get("streetAddress"))==null?null:y.touched)),l(5),o("ngClass",g(36,c,((P=e.signupForm.get("city"))==null?null:P.invalid)&&((P=e.signupForm.get("city"))==null?null:P.touched))),l(),o("ngIf",((b=e.signupForm.get("city"))==null||b.errors==null?null:b.errors.required)&&((b=e.signupForm.get("city"))==null?null:b.touched)),l(4),o("ngClass",g(38,c,((L=e.signupForm.get("state"))==null?null:L.invalid)&&((L=e.signupForm.get("state"))==null?null:L.touched))),l(3),o("ngForOf",e.states),l(),o("ngIf",((E=e.signupForm.get("state"))==null||E.errors==null?null:E.errors.required)&&((E=e.signupForm.get("state"))==null?null:E.touched)),l(4),o("ngClass",g(40,c,((z=e.signupForm.get("zipCode"))==null?null:z.invalid)&&((z=e.signupForm.get("zipCode"))==null?null:z.touched))),l(),o("ngIf",((w=e.signupForm.get("zipCode"))==null||w.errors==null?null:w.errors.required)&&((w=e.signupForm.get("zipCode"))==null?null:w.touched)),l(),o("ngIf",((I=e.signupForm.get("zipCode"))==null||I.errors==null?null:I.errors.pattern)&&((I=e.signupForm.get("zipCode"))==null?null:I.touched)),l(2),o("disabled",e.signupForm.invalid||e.isLoading),l(),o("ngIf",e.isLoading)}},dependencies:[W,U,k,K,ne,$,ee,te,Z,Q,B,H,J,X],encapsulation:2})};export{oe as SignupComponent};
