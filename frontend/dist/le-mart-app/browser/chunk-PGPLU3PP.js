import{a as j}from"./chunk-IDLD7SZC.js";import{a as V}from"./chunk-YHL4MHUU.js";import{h as A}from"./chunk-PMZGBCKH.js";import{g as O,i as B}from"./chunk-CMEXFVJG.js";import{L as N,k as D,l as E,m as T,o as w,p as F,q as R}from"./chunk-66TIHPRD.js";import{Db as _,Eb as m,Hb as C,Mb as a,Nb as u,Ob as b,Pa as y,Ra as o,Xa as s,Xb as I,Yb as S,Zb as P,_b as k,ab as h,ga as f,gb as g,ha as v,nb as d,sb as i,tb as n,ub as p,yb as x}from"./chunk-J2LCUAOM.js";var Q=(e,r)=>({"text-success":e,"text-danger":r});function H(e,r){e&1&&p(0,"i",25)}function L(e,r){e&1&&p(0,"i",26)}function U(e,r){e&1&&p(0,"i",27)}function W(e,r){if(e&1&&(i(0,"div",19)(1,"h5"),a(2,"Category"),n(),i(3,"p"),a(4),n()()),e&2){let t=m(2);o(4),u(t.product.categoryName)}}function z(e,r){if(e&1){let t=x();i(0,"div",2)(1,"button",3),_("click",function(){f(t);let l=m();return v(l.goBack())}),p(2,"i",4),a(3," Back to Products "),n(),i(4,"div",5)(5,"div",6)(6,"div",7),p(7,"img",8),n()(),i(8,"div",9)(9,"h2",10),a(10),n(),i(11,"div",10)(12,"div",11)(13,"div",12),g(14,H,1,0,"i",13)(15,L,1,0,"i",14)(16,U,1,0,"i",15),n(),i(17,"span",16),a(18),S(19,"number"),n()()(),i(20,"h4",17),a(21),S(22,"currency"),n(),i(23,"p",18),a(24),n(),i(25,"div",19)(26,"h5"),a(27,"Description"),n(),i(28,"p",20),a(29),n()(),g(30,W,5,1,"div",21),i(31,"div",22)(32,"button",23),_("click",function(){f(t);let l=m();return v(l.addToCart())}),p(33,"i",24),a(34," Add to Cart "),n()()()()()}if(e&2){let t=m();o(7),C("alt",t.product.name),d("src",t.product.imageUrl||"assets/img/placeholder.jpg",y),o(3),u(t.product.name),o(4),d("ngForOf",t.getRatingStars(t.product.rating).fullStars),o(),d("ngIf",t.getRatingStars(t.product.rating).hasHalfStar),o(),d("ngForOf",t.getRatingStars(t.product.rating).emptyStars),o(2),b("",k(19,13,t.product.rating,"1.1-1"),"/5"),o(3),u(P(22,16,t.product.price)),o(2),d("ngClass",I(18,Q,t.product.stockQuantity>0,t.product.stockQuantity<=0)),o(),b(" ",t.product.stockQuantity>0?"In Stock":"Out of Stock"," "),o(5),u(t.product.description||"No description available"),o(),d("ngIf",t.product.categoryName),o(2),d("disabled",t.product.stockQuantity<=0)}}function $(e,r){e&1&&(i(0,"div",28)(1,"div",29)(2,"span",30),a(3,"Loading..."),n()(),i(4,"p",31),a(5,"Loading product details..."),n()())}function q(e,r){if(e&1){let t=x();i(0,"div",28),p(1,"i",32),i(2,"h3",33),a(3,"Product not found"),n(),i(4,"button",34),_("click",function(){f(t);let l=m();return v(l.goBack())}),a(5,"Back to Products"),n()()}}var M=class e{constructor(r,t,c,l,G){this.route=r;this.router=t;this.productService=c;this.cartService=l;this.toastr=G}product=null;loading=!1;stars=[1,2,3,4,5];ngOnInit(){this.loading=!0;let r=this.route.snapshot.paramMap.get("id");r?this.productService.getById(+r).subscribe({next:t=>{this.product=t,this.loading=!1},error:t=>{console.error("Error loading product",t),this.loading=!1,this.toastr.error("Failed to load product details"),this.router.navigate(["/"])}}):this.router.navigate(["/"])}addToCart(){if(this.product){if(this.product.stockQuantity<=0){this.toastr.warning("This product is out of stock");return}this.cartService.addItem(this.product.id,this.product.price,1),this.toastr.success(`${this.product.name} added to cart!`)}}goBack(){this.router.navigate(["/"])}getRatingStars(r){let t=Math.floor(r),c=r%1>=.5,l=5-t-(c?1:0);return{fullStars:Array(t).fill(0),hasHalfStar:c,emptyStars:Array(l).fill(0)}}static \u0275fac=function(t){return new(t||e)(s(O),s(B),s(j),s(V),s(A))};static \u0275cmp=h({type:e,selectors:[["app-product-detail"]],decls:3,vars:3,consts:[["class","container py-5",4,"ngIf"],["class","container py-5 text-center",4,"ngIf"],[1,"container","py-5"],[1,"btn","btn-outline-secondary","mb-4",3,"click"],[1,"bi","bi-arrow-left"],[1,"row"],[1,"col-md-6","mb-4","mb-md-0"],[1,"bg-light","p-3","rounded"],[1,"img-fluid","rounded",2,"max-height","500px","object-fit","contain",3,"src","alt"],[1,"col-md-6"],[1,"mb-3"],[1,"d-flex","align-items-center"],[1,"text-warning","me-2"],["class","bi bi-star-fill",4,"ngFor","ngForOf"],["class","bi bi-star-half",4,"ngIf"],["class","bi bi-star",4,"ngFor","ngForOf"],[1,"text-muted","ms-1"],[1,"mb-3","text-primary"],[1,"mb-3",3,"ngClass"],[1,"mb-4"],[1,"text-muted"],["class","mb-4",4,"ngIf"],[1,"d-flex","gap-3"],[1,"btn","btn-primary","btn-lg",3,"click","disabled"],[1,"bi","bi-cart-plus"],[1,"bi","bi-star-fill"],[1,"bi","bi-star-half"],[1,"bi","bi-star"],[1,"container","py-5","text-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"bi","bi-exclamation-circle","display-1","text-muted"],[1,"mt-3"],[1,"btn","btn-primary","mt-3",3,"click"]],template:function(t,c){t&1&&g(0,z,35,21,"div",0)(1,$,6,0,"div",1)(2,q,6,0,"div",1),t&2&&(d("ngIf",c.product),o(),d("ngIf",c.loading),o(),d("ngIf",!c.product&&!c.loading))},dependencies:[R,D,E,T,w,F,N],encapsulation:2})};export{M as ProductDetailComponent};
